<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>111</title>
  <link rel="stylesheet" href="">
</head>
<style>
  html{ width: 100%; height: 100%; background-color: #f60;}
  *{margin: 0; padding: 0;}
  body{
  }

  #box{
    width: 100%; height: 1200px;
    background: linear-gradient(#fff,pink);
    transform: translate3d(0, 0, 0);
  }
</style>
<body>
<div id="box">
  22<br>
  11<br>
  11<br>
  11<br>
  11<br>
  11<br>
  11<br>
</div>

<script type="text/javascript">


function init(){

  var loaction = window.location;
  var doc = window.document;
  var screenHeight = document.documentElement.clientHeight;

  var body = doc.querySelectorAll('body')[0];

  var box = doc.querySelector('#box');
  var boxHeight = box.offsetHeight;

  var startY = 0;
  var downOff = false;
  console.log;
  bind(box,'touchstart',function(ev){
    box.style.transition = '0ms';
    box.style.transform = 'translate3d(0,0,0)';
    downOff = true;
  });

  bind(box,'touchmove',function(ev){
    var touch = ev.changedTouches[0];
    if(downOff){
      downOff = false;
      startY = touch.pageY;
    }

    if(body.scrollTop <= 50 || body.scrollTop >= (boxHeight-screenHeight)-50){
      box.style.transform = 'translate3d(0,'+ (touch.pageY-startY)/3 +'px,0)';
    }

  });

  bind(box,'touchend',function(){
    box.style.transition = '300ms';
    box.style.transform = 'translate3d(0,0,0)';
  });

}

function bind(obj,event,callback){
  obj.addEventListener(event,callback,false);
}

var browerType = navigator.userAgent.toLowerCase();

// 因为在微信里面打开的话他已经带了这样的效果，所以在这里会不执行这段代码
if(browerType.match(/MicroMessenger/i) != "micromessenger"){
  init();
}

</script>
</body>
</html>
